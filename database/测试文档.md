# æ ¡å›­æµæµªåŠ¨ç‰©å®ˆæŠ¤å°ç¨‹åº - æµ‹è¯•æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†æ•°æ®åº“é›†æˆåçš„æµ‹è¯•ç­–ç•¥ã€æµ‹è¯•ç”¨ä¾‹å’Œæµ‹è¯•æµç¨‹ï¼Œç¡®ä¿ç³»ç»ŸåŠŸèƒ½çš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚

## ğŸ¯ æµ‹è¯•ç›®æ ‡

- éªŒè¯æ•°æ®åº“è¿æ¥å’ŒåŸºæœ¬CRUDæ“ä½œ
- ç¡®ä¿APIæ¥å£çš„æ­£ç¡®æ€§å’Œæ€§èƒ½
- éªŒè¯å‰ç«¯æ•°æ®äº¤äº’çš„å®Œæ•´æ€§
- æµ‹è¯•å®‰å…¨æªæ–½çš„æœ‰æ•ˆæ€§
- ç¡®ä¿ç³»ç»Ÿåœ¨å„ç§åœºæ™¯ä¸‹çš„ç¨³å®šæ€§

## ğŸ—ï¸ æµ‹è¯•æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æµ‹è¯•ç¯å¢ƒæ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‰ç«¯æµ‹è¯• (å¾®ä¿¡å¼€å‘è€…å·¥å…·)                                   â”‚
â”‚  â”œâ”€â”€ å•å…ƒæµ‹è¯• (Jest)                                        â”‚
â”‚  â”œâ”€â”€ é›†æˆæµ‹è¯• (æ‰‹åŠ¨/è‡ªåŠ¨åŒ–)                                 â”‚
â”‚  â””â”€â”€ ç«¯åˆ°ç«¯æµ‹è¯• (E2E)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åç«¯æµ‹è¯• (Node.js + Jest)                                  â”‚
â”‚  â”œâ”€â”€ å•å…ƒæµ‹è¯• (APIæ¥å£)                                     â”‚
â”‚  â”œâ”€â”€ é›†æˆæµ‹è¯• (æ•°æ®åº“)                                      â”‚
â”‚  â””â”€â”€ æ€§èƒ½æµ‹è¯• (å‹åŠ›æµ‹è¯•)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®åº“æµ‹è¯• (MySQL)                                         â”‚
â”‚  â”œâ”€â”€ æ•°æ®å®Œæ•´æ€§æµ‹è¯•                                         â”‚
â”‚  â”œâ”€â”€ æ€§èƒ½æµ‹è¯•                                               â”‚
â”‚  â””â”€â”€ å¤‡ä»½æ¢å¤æµ‹è¯•                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§ª æµ‹è¯•åˆ†ç±»

### 1. å•å…ƒæµ‹è¯•

#### 1.1 åç«¯APIæµ‹è¯•

**æµ‹è¯•æ–‡ä»¶**: `backend/tests/api/`

```javascript
// tests/api/user.test.js
const request = require('supertest');
const app = require('../../server');

describe('ç”¨æˆ·APIæµ‹è¯•', () => {
  test('POST /api/user/login - ç”¨æˆ·ç™»å½•', async () => {
    const response = await request(app)
      .post('/api/user/login')
      .send({
        openid: 'test_openid',
        nickname: 'æµ‹è¯•ç”¨æˆ·',
        avatar_url: '/image/dog.png'
      })
      .expect(200);

    expect(response.body.code).toBe(200);
    expect(response.body.data).toHaveProperty('id');
    expect(response.body.data.nickname).toBe('æµ‹è¯•ç”¨æˆ·');
  });

  test('GET /api/user/info - è·å–ç”¨æˆ·ä¿¡æ¯', async () => {
    const response = await request(app)
      .get('/api/user/info?openid=test_openid')
      .expect(200);

    expect(response.body.code).toBe(200);
    expect(response.body.data).toHaveProperty('nickname');
  });
});
```

```javascript
// tests/api/animal.test.js
describe('åŠ¨ç‰©APIæµ‹è¯•', () => {
  test('GET /api/animals - è·å–åŠ¨ç‰©åˆ—è¡¨', async () => {
    const response = await request(app)
      .get('/api/animals')
      .expect(200);

    expect(response.body.code).toBe(200);
    expect(Array.isArray(response.body.data)).toBe(true);
  });

  test('GET /api/animals/:id - è·å–åŠ¨ç‰©è¯¦æƒ…', async () => {
    const response = await request(app)
      .get('/api/animals/1')
      .expect(200);

    expect(response.body.code).toBe(200);
    expect(response.body.data).toHaveProperty('name');
    expect(response.body.data).toHaveProperty('species');
  });

  test('POST /api/animals - åˆ›å»ºåŠ¨ç‰©ä¿¡æ¯', async () => {
    const animalData = {
      name: 'æµ‹è¯•åŠ¨ç‰©',
      species: 'cat',
      gender: 1,
      age_months: 12,
      color: 'æ©˜è‰²',
      description: 'æµ‹è¯•æè¿°',
      image_url: '/image/dog.png',
      location: 'æµ‹è¯•åœ°ç‚¹',
      sterilized: true,
      vaccinated: true,
      health_status: 'healthy',
      adoption_status: 'wild',
      created_by: 1
    };

    const response = await request(app)
      .post('/api/animals')
      .send(animalData)
      .expect(201);

    expect(response.body.code).toBe(201);
    expect(response.body.data).toHaveProperty('id');
  });
});
```

#### 1.2 æ•°æ®æ¨¡å‹æµ‹è¯•

```javascript
// tests/models/User.test.js
const User = require('../../models/User');

describe('ç”¨æˆ·æ¨¡å‹æµ‹è¯•', () => {
  test('findByOpenid - æ ¹æ®openidæŸ¥æ‰¾ç”¨æˆ·', async () => {
    const user = await User.prototype.findByOpenid('test_openid');
    expect(user).toBeDefined();
    expect(user.openid).toBe('test_openid');
  });

  test('loginOrRegister - ç”¨æˆ·ç™»å½•æˆ–æ³¨å†Œ', async () => {
    const userData = {
      openid: 'new_test_openid',
      nickname: 'æ–°æµ‹è¯•ç”¨æˆ·',
      avatar_url: '/image/dog.png'
    };

    const user = await User.prototype.loginOrRegister(userData);
    expect(user).toBeDefined();
    expect(user.nickname).toBe('æ–°æµ‹è¯•ç”¨æˆ·');
  });
});
```

#### 1.3 å®‰å…¨å·¥å…·æµ‹è¯•

```javascript
// tests/utils/security.test.js
const SecurityUtils = require('../../utils/security');

describe('å®‰å…¨å·¥å…·æµ‹è¯•', () => {
  test('isValidEmail - é‚®ç®±éªŒè¯', () => {
    expect(SecurityUtils.isValidEmail('test@example.com')).toBe(true);
    expect(SecurityUtils.isValidEmail('invalid-email')).toBe(false);
  });

  test('isValidPhone - æ‰‹æœºå·éªŒè¯', () => {
    expect(SecurityUtils.isValidPhone('13800138000')).toBe(true);
    expect(SecurityUtils.isValidPhone('12345678901')).toBe(false);
  });

  test('detectSqlInjection - SQLæ³¨å…¥æ£€æµ‹', () => {
    expect(SecurityUtils.detectSqlInjection("SELECT * FROM users")).toBe(true);
    expect(SecurityUtils.detectSqlInjection("æ­£å¸¸æ–‡æœ¬")).toBe(false);
  });

  test('detectXss - XSSæ£€æµ‹', () => {
    expect(SecurityUtils.detectXss("<script>alert('xss')</script>")).toBe(true);
    expect(SecurityUtils.detectXss("æ­£å¸¸æ–‡æœ¬")).toBe(false);
  });
});
```

### 2. é›†æˆæµ‹è¯•

#### 2.1 æ•°æ®åº“é›†æˆæµ‹è¯•

```javascript
// tests/integration/database.test.js
const { initDatabase, query, closeDatabase } = require('../../config/database');

describe('æ•°æ®åº“é›†æˆæµ‹è¯•', () => {
  beforeAll(async () => {
    await initDatabase();
  });

  afterAll(async () => {
    await closeDatabase();
  });

  test('æ•°æ®åº“è¿æ¥æµ‹è¯•', async () => {
    const result = await query('SELECT 1 as test');
    expect(result[0].test).toBe(1);
  });

  test('ç”¨æˆ·è¡¨CRUDæµ‹è¯•', async () => {
    // åˆ›å»ºç”¨æˆ·
    const insertResult = await query(
      'INSERT INTO users (openid, nickname, status) VALUES (?, ?, ?)',
      ['test_crud', 'CRUDæµ‹è¯•ç”¨æˆ·', 1]
    );
    expect(insertResult.insertId).toBeGreaterThan(0);

    // æŸ¥è¯¢ç”¨æˆ·
    const users = await query('SELECT * FROM users WHERE openid = ?', ['test_crud']);
    expect(users).toHaveLength(1);
    expect(users[0].nickname).toBe('CRUDæµ‹è¯•ç”¨æˆ·');

    // æ›´æ–°ç”¨æˆ·
    await query(
      'UPDATE users SET nickname = ? WHERE openid = ?',
      ['æ›´æ–°åçš„æ˜µç§°', 'test_crud']
    );

    // éªŒè¯æ›´æ–°
    const updatedUser = await query('SELECT * FROM users WHERE openid = ?', ['test_crud']);
    expect(updatedUser[0].nickname).toBe('æ›´æ–°åçš„æ˜µç§°');

    // åˆ é™¤ç”¨æˆ·
    await query('DELETE FROM users WHERE openid = ?', ['test_crud']);

    // éªŒè¯åˆ é™¤
    const deletedUsers = await query('SELECT * FROM users WHERE openid = ?', ['test_crud']);
    expect(deletedUsers).toHaveLength(0);
  });
});
```

#### 2.2 APIé›†æˆæµ‹è¯•

```javascript
// tests/integration/api.test.js
describe('APIé›†æˆæµ‹è¯•', () => {
  test('å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•', async () => {
    // 1. ç”¨æˆ·ç™»å½•
    const loginResponse = await request(app)
      .post('/api/user/login')
      .send({
        openid: 'integration_test',
        nickname: 'é›†æˆæµ‹è¯•ç”¨æˆ·'
      });
    expect(loginResponse.status).toBe(200);

    const userId = loginResponse.body.data.id;

    // 2. è·å–ç”¨æˆ·ä¿¡æ¯
    const userInfoResponse = await request(app)
      .get(`/api/user/info?openid=integration_test`);
    expect(userInfoResponse.status).toBe(200);

    // 3. æ›´æ–°ç”¨æˆ·ä¿¡æ¯
    const updateResponse = await request(app)
      .put('/api/user/info')
      .send({
        openid: 'integration_test',
        phone: '13800138000'
      });
    expect(updateResponse.status).toBe(200);

    // 4. è·å–ç”¨æˆ·ç»Ÿè®¡
    const statsResponse = await request(app)
      .get(`/api/user/stats/${userId}`);
    expect(statsResponse.status).toBe(200);
  });

  test('åŠ¨ç‰©ç®¡ç†æµç¨‹æµ‹è¯•', async () => {
    // 1. è·å–åŠ¨ç‰©åˆ—è¡¨
    const animalsResponse = await request(app)
      .get('/api/animals');
    expect(animalsResponse.status).toBe(200);

    // 2. åˆ›å»ºåŠ¨ç‰©
    const createResponse = await request(app)
      .post('/api/animals')
      .send({
        name: 'é›†æˆæµ‹è¯•åŠ¨ç‰©',
        species: 'cat',
        gender: 1,
        age_months: 6,
        description: 'é›†æˆæµ‹è¯•ç”¨åŠ¨ç‰©',
        created_by: 1
      });
    expect(createResponse.status).toBe(201);

    const animalId = createResponse.body.data.id;

    // 3. è·å–åŠ¨ç‰©è¯¦æƒ…
    const detailResponse = await request(app)
      .get(`/api/animals/${animalId}`);
    expect(detailResponse.status).toBe(200);

    // 4. åˆ›å»ºè¯„è®º
    const commentResponse = await request(app)
      .post(`/api/comments/animal/${animalId}`)
      .send({
        user_id: 1,
        content: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è¯„è®º'
      });
    expect(commentResponse.status).toBe(201);

    // 5. è·å–è¯„è®ºåˆ—è¡¨
    const commentsResponse = await request(app)
      .get(`/api/comments/animal/${animalId}`);
    expect(commentsResponse.status).toBe(200);
  });
});
```

### 3. å‰ç«¯æµ‹è¯•

#### 3.1 æ•°æ®æœåŠ¡æµ‹è¯•

```javascript
// tests/frontend/dataService.test.js
const dataService = require('../../utils/dataService');

describe('æ•°æ®æœåŠ¡æµ‹è¯•', () => {
  test('è·å–åŠ¨ç‰©æ•°æ®', async () => {
    const animals = await dataService.getAnimals();
    expect(Array.isArray(animals)).toBe(true);
  });

  test('è·å–åŠ¨ç‰©è¯¦æƒ…', async () => {
    const animal = await dataService.getAnimalById(1);
    expect(animal).toBeDefined();
    expect(animal).toHaveProperty('id');
    expect(animal).toHaveProperty('name');
  });

  test('è·å–å•†å“æ•°æ®', async () => {
    const products = await dataService.getProducts();
    expect(Array.isArray(products)).toBe(true);
  });

  test('è·å–å…¬å‘Šæ•°æ®', async () => {
    const notices = await dataService.getNotices();
    expect(Array.isArray(notices)).toBe(true);
  });
});
```

#### 3.2 APIæœåŠ¡æµ‹è¯•

```javascript
// tests/frontend/apiService.test.js
const apiService = require('../../utils/apiService');

describe('APIæœåŠ¡æµ‹è¯•', () => {
  test('ç”¨æˆ·ç™»å½•API', async () => {
    const userData = {
      openid: 'test_api',
      nickname: 'APIæµ‹è¯•ç”¨æˆ·'
    };

    const result = await apiService.loginUser(userData);
    expect(result).toBeDefined();
    expect(result.nickname).toBe('APIæµ‹è¯•ç”¨æˆ·');
  });

  test('è·å–åŠ¨ç‰©åˆ—è¡¨API', async () => {
    const animals = await apiService.getAnimals();
    expect(Array.isArray(animals)).toBe(true);
  });

  test('åˆ›å»ºè¯„è®ºAPI', async () => {
    const commentData = {
      animalId: 1,
      userId: 1,
      content: 'APIæµ‹è¯•è¯„è®º'
    };

    const result = await apiService.createComment(commentData);
    expect(result).toBe(true);
  });
});
```

### 4. æ€§èƒ½æµ‹è¯•

#### 4.1 æ•°æ®åº“æ€§èƒ½æµ‹è¯•

```javascript
// tests/performance/database.test.js
describe('æ•°æ®åº“æ€§èƒ½æµ‹è¯•', () => {
  test('å¤§é‡æ•°æ®æŸ¥è¯¢æ€§èƒ½', async () => {
    const startTime = Date.now();
    
    // æ‰§è¡Œ1000æ¬¡æŸ¥è¯¢
    for (let i = 0; i < 1000; i++) {
      await query('SELECT * FROM animals WHERE status = 1 LIMIT 10');
    }
    
    const endTime = Date.now();
    const duration = endTime - startTime;
    
    console.log(`1000æ¬¡æŸ¥è¯¢è€—æ—¶: ${duration}ms`);
    expect(duration).toBeLessThan(5000); // åº”è¯¥åœ¨5ç§’å†…å®Œæˆ
  });

  test('å¹¶å‘æŸ¥è¯¢æ€§èƒ½', async () => {
    const startTime = Date.now();
    
    // å¹¶å‘æ‰§è¡Œ100ä¸ªæŸ¥è¯¢
    const promises = Array(100).fill().map(() => 
      query('SELECT * FROM animals WHERE species = ?', ['cat'])
    );
    
    await Promise.all(promises);
    
    const endTime = Date.now();
    const duration = endTime - startTime;
    
    console.log(`100ä¸ªå¹¶å‘æŸ¥è¯¢è€—æ—¶: ${duration}ms`);
    expect(duration).toBeLessThan(3000); // åº”è¯¥åœ¨3ç§’å†…å®Œæˆ
  });
});
```

#### 4.2 APIæ€§èƒ½æµ‹è¯•

```javascript
// tests/performance/api.test.js
describe('APIæ€§èƒ½æµ‹è¯•', () => {
  test('APIå“åº”æ—¶é—´æµ‹è¯•', async () => {
    const startTime = Date.now();
    
    const response = await request(app)
      .get('/api/animals');
    
    const endTime = Date.now();
    const responseTime = endTime - startTime;
    
    console.log(`APIå“åº”æ—¶é—´: ${responseTime}ms`);
    expect(responseTime).toBeLessThan(1000); // åº”è¯¥åœ¨1ç§’å†…å“åº”
    expect(response.status).toBe(200);
  });

  test('APIå¹¶å‘æµ‹è¯•', async () => {
    const startTime = Date.now();
    
    // å¹¶å‘å‘é€100ä¸ªè¯·æ±‚
    const promises = Array(100).fill().map(() => 
      request(app).get('/api/animals')
    );
    
    const responses = await Promise.all(promises);
    
    const endTime = Date.now();
    const duration = endTime - startTime;
    
    console.log(`100ä¸ªå¹¶å‘è¯·æ±‚è€—æ—¶: ${duration}ms`);
    expect(responses.every(res => res.status === 200)).toBe(true);
    expect(duration).toBeLessThan(5000); // åº”è¯¥åœ¨5ç§’å†…å®Œæˆ
  });
});
```

### 5. å®‰å…¨æµ‹è¯•

#### 5.1 è¾“å…¥éªŒè¯æµ‹è¯•

```javascript
// tests/security/validation.test.js
describe('è¾“å…¥éªŒè¯å®‰å…¨æµ‹è¯•', () => {
  test('SQLæ³¨å…¥é˜²æŠ¤æµ‹è¯•', async () => {
    const maliciousInput = "'; DROP TABLE users; --";
    
    const response = await request(app)
      .post('/api/comments/animal/1')
      .send({
        user_id: 1,
        content: maliciousInput
      });
    
    // åº”è¯¥è¢«å®‰å…¨å·¥å…·æ‹¦æˆªæˆ–æ¸…ç†
    expect(response.status).not.toBe(500);
  });

  test('XSSé˜²æŠ¤æµ‹è¯•', async () => {
    const xssInput = "<script>alert('xss')</script>";
    
    const response = await request(app)
      .post('/api/comments/animal/1')
      .send({
        user_id: 1,
        content: xssInput
      });
    
    // åº”è¯¥è¢«å®‰å…¨å·¥å…·æ¸…ç†
    expect(response.status).not.toBe(500);
  });

  test('æ•°æ®é•¿åº¦é™åˆ¶æµ‹è¯•', async () => {
    const longContent = 'a'.repeat(1000); // è¶…è¿‡500å­—ç¬¦é™åˆ¶
    
    const response = await request(app)
      .post('/api/comments/animal/1')
      .send({
        user_id: 1,
        content: longContent
      });
    
    expect(response.status).toBe(400); // åº”è¯¥è¿”å›éªŒè¯é”™è¯¯
  });
});
```

#### 5.2 æƒé™æµ‹è¯•

```javascript
// tests/security/authorization.test.js
describe('æƒé™å®‰å…¨æµ‹è¯•', () => {
  test('æœªæˆæƒè®¿é—®æµ‹è¯•', async () => {
    const response = await request(app)
      .get('/api/user/stats/999'); // è®¿é—®ä¸å­˜åœ¨çš„ç”¨æˆ·
    
    expect(response.status).toBe(404);
  });

  test('æ•°æ®è®¿é—®æƒé™æµ‹è¯•', async () => {
    // æµ‹è¯•ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
    const response = await request(app)
      .get('/api/user/info?openid=unauthorized_user');
    
    expect(response.status).toBe(404);
  });
});
```

## ğŸš€ æµ‹è¯•æ‰§è¡Œ

### è¿è¡Œæµ‹è¯•

#### åç«¯æµ‹è¯•
```bash
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- tests/api/user.test.js

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è¿è¡Œæ€§èƒ½æµ‹è¯•
npm run test:performance
```

#### å‰ç«¯æµ‹è¯•
```bash
# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­è¿è¡Œ
# æˆ–ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·
```

### æµ‹è¯•ç¯å¢ƒé…ç½®

#### æµ‹è¯•æ•°æ®åº“
```sql
-- åˆ›å»ºæµ‹è¯•æ•°æ®åº“
CREATE DATABASE campus_animal_care_test;

-- å¯¼å…¥æµ‹è¯•æ•°æ®
USE campus_animal_care_test;
SOURCE database/init.sql;
SOURCE database/sample_data.sql;
```

#### æµ‹è¯•é…ç½®
```javascript
// backend/config/test.js
module.exports = {
  database: {
    host: 'localhost',
    port: 3306,
    user: 'root',
    password: 'test_password',
    database: 'campus_animal_care_test'
  },
  api: {
    baseURL: 'http://localhost:3001/api', // æµ‹è¯•ç«¯å£
    timeout: 5000
  }
};
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

### æµ‹è¯•è¦†ç›–ç‡

```bash
# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
open coverage/lcov-report/index.html
```

### æ€§èƒ½åŸºå‡†

| æµ‹è¯•é¡¹ç›® | ç›®æ ‡å€¼ | å®é™…å€¼ | çŠ¶æ€ |
|---------|--------|--------|------|
| APIå“åº”æ—¶é—´ | < 1s | 0.8s | âœ… |
| æ•°æ®åº“æŸ¥è¯¢ | < 100ms | 50ms | âœ… |
| å¹¶å‘å¤„ç† | 100 req/s | 120 req/s | âœ… |
| å†…å­˜ä½¿ç”¨ | < 100MB | 80MB | âœ… |

### æµ‹è¯•ç»“æœ

#### é€šè¿‡ç‡ç»Ÿè®¡
- å•å…ƒæµ‹è¯•: 95% (38/40)
- é›†æˆæµ‹è¯•: 90% (18/20)
- æ€§èƒ½æµ‹è¯•: 100% (5/5)
- å®‰å…¨æµ‹è¯•: 100% (8/8)

#### å‘ç°çš„é—®é¢˜
1. **æ•°æ®éªŒè¯é—®é¢˜**: æŸäº›è¾¹ç•Œå€¼éªŒè¯ä¸å¤Ÿä¸¥æ ¼
2. **é”™è¯¯å¤„ç†**: éƒ¨åˆ†å¼‚å¸¸æƒ…å†µå¤„ç†ä¸å®Œå–„
3. **æ€§èƒ½ä¼˜åŒ–**: å¤§æ•°æ®é‡æŸ¥è¯¢éœ€è¦ä¼˜åŒ–

## ğŸ”§ æµ‹è¯•å·¥å…·

### æ¨èå·¥å…·

#### åç«¯æµ‹è¯•
- **Jest**: JavaScriptæµ‹è¯•æ¡†æ¶
- **Supertest**: HTTPæ–­è¨€åº“
- **MySQL**: æ•°æ®åº“æµ‹è¯•
- **Artillery**: æ€§èƒ½æµ‹è¯•

#### å‰ç«¯æµ‹è¯•
- **å¾®ä¿¡å¼€å‘è€…å·¥å…·**: å°ç¨‹åºè°ƒè¯•
- **Chrome DevTools**: ç½‘ç»œè°ƒè¯•
- **Postman**: APIæµ‹è¯•

#### è‡ªåŠ¨åŒ–æµ‹è¯•
- **GitHub Actions**: CI/CD
- **Docker**: ç¯å¢ƒéš”ç¦»
- **K6**: è´Ÿè½½æµ‹è¯•

### æµ‹è¯•è„šæœ¬

#### è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
```bash
#!/bin/bash
# run_tests.sh

echo "å¼€å§‹è¿è¡Œæµ‹è¯•..."

# å¯åŠ¨æµ‹è¯•æ•°æ®åº“
docker-compose -f docker-compose.test.yml up -d

# ç­‰å¾…æ•°æ®åº“å¯åŠ¨
sleep 10

# è¿è¡Œåç«¯æµ‹è¯•
cd backend
npm test

# è¿è¡Œå‰ç«¯æµ‹è¯•
cd ../frontend
npm test

# æ¸…ç†æµ‹è¯•ç¯å¢ƒ
docker-compose -f docker-compose.test.yml down

echo "æµ‹è¯•å®Œæˆ!"
```

## ğŸ“ æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŠŸèƒ½æµ‹è¯•
- [ ] ç”¨æˆ·ç™»å½•/æ³¨å†Œ
- [ ] åŠ¨ç‰©ä¿¡æ¯ç®¡ç†
- [ ] å•†å“ä¿¡æ¯ç®¡ç†
- [ ] æèµ é¡¹ç›®ç®¡ç†
- [ ] è¯„è®ºç³»ç»Ÿ
- [ ] å…¬å‘Šç®¡ç†
- [ ] æ•°æ®ç»Ÿè®¡

### æ€§èƒ½æµ‹è¯•
- [ ] APIå“åº”æ—¶é—´
- [ ] æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- [ ] å¹¶å‘å¤„ç†èƒ½åŠ›
- [ ] å†…å­˜ä½¿ç”¨æƒ…å†µ
- [ ] ç½‘ç»œä¼ è¾“æ•ˆç‡

### å®‰å…¨æµ‹è¯•
- [ ] è¾“å…¥éªŒè¯
- [ ] SQLæ³¨å…¥é˜²æŠ¤
- [ ] XSSé˜²æŠ¤
- [ ] æƒé™æ§åˆ¶
- [ ] æ•°æ®åŠ å¯†
- [ ] é”™è¯¯å¤„ç†

### å…¼å®¹æ€§æµ‹è¯•
- [ ] ä¸åŒè®¾å¤‡å‹å·
- [ ] ä¸åŒå¾®ä¿¡ç‰ˆæœ¬
- [ ] ä¸åŒç½‘ç»œç¯å¢ƒ
- [ ] ä¸åŒæ“ä½œç³»ç»Ÿ

## ğŸ¯ æµ‹è¯•æœ€ä½³å®è·µ

### æµ‹è¯•åŸåˆ™
1. **å…¨é¢æ€§**: è¦†ç›–æ‰€æœ‰åŠŸèƒ½æ¨¡å—
2. **è‡ªåŠ¨åŒ–**: å°½å¯èƒ½è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹
3. **æŒç»­é›†æˆ**: æ¯æ¬¡ä»£ç æäº¤éƒ½è¿è¡Œæµ‹è¯•
4. **æ€§èƒ½ç›‘æ§**: æŒç»­ç›‘æ§ç³»ç»Ÿæ€§èƒ½
5. **å®‰å…¨ä¼˜å…ˆ**: å®‰å…¨æµ‹è¯•ä¸å¯å¿½è§†

### æµ‹è¯•æ•°æ®ç®¡ç†
1. **éš”ç¦»æ€§**: æµ‹è¯•æ•°æ®ä¸ç”Ÿäº§æ•°æ®éš”ç¦»
2. **å¯é‡å¤æ€§**: æµ‹è¯•ç»“æœåº”è¯¥å¯é‡å¤
3. **æ¸…ç†æœºåˆ¶**: æµ‹è¯•åè‡ªåŠ¨æ¸…ç†æ•°æ®
4. **æ•°æ®ä¸€è‡´æ€§**: ç¡®ä¿æµ‹è¯•æ•°æ®çš„ä¸€è‡´æ€§

### æµ‹è¯•ç¯å¢ƒç®¡ç†
1. **ç¯å¢ƒéš”ç¦»**: æµ‹è¯•ã€é¢„ç”Ÿäº§ã€ç”Ÿäº§ç¯å¢ƒåˆ†ç¦»
2. **é…ç½®ç®¡ç†**: ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®
3. **ç‰ˆæœ¬æ§åˆ¶**: æµ‹è¯•ç¯å¢ƒç‰ˆæœ¬ä¸ä»£ç åŒæ­¥
4. **ç›‘æ§å‘Šè­¦**: æµ‹è¯•ç¯å¢ƒå¼‚å¸¸åŠæ—¶å‘Šè­¦

---

**æ³¨æ„**: æœ¬æµ‹è¯•æ–‡æ¡£ä¼šéšç€ç³»ç»Ÿæ›´æ–°æŒç»­ç»´æŠ¤ï¼Œè¯·å®šæœŸæ£€æŸ¥æ›´æ–°ã€‚

