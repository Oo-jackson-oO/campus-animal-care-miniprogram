# æ ¡å›­æµæµªåŠ¨ç‰©å®ˆæŠ¤å°ç¨‹åº - æ•°æ®åº“é›†æˆæŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†ç°æœ‰çš„å¾®ä¿¡å°ç¨‹åºä»æœ¬åœ°æ•°æ®å­˜å‚¨è¿ç§»åˆ°MySQLæ•°æ®åº“ï¼Œå®ç°å®Œæ•´çš„å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¾®ä¿¡å°ç¨‹åºå‰ç«¯å±‚                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  pages/index/     pages/calendar/    pages/my/    pages/hero/â”‚
â”‚  (é¦–é¡µ)           (å®ˆæŠ¤ä¾ )          (ä¸ªäººä¸­å¿ƒ)    (åŠ¨ç‰©è¯¦æƒ…)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®æœåŠ¡å±‚ (dataService.js)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ æœ¬åœ°æ•°æ®æ¨¡å¼ â”‚  â”‚ æ•°æ®åº“æ¨¡å¼   â”‚  â”‚ æ··åˆæ¨¡å¼     â”‚         â”‚
â”‚  â”‚ (å½“å‰)      â”‚  â”‚ (ç›®æ ‡)      â”‚  â”‚ (è¿‡æ¸¡)      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   APIå°è£…å±‚ (apiService.js)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ HTTPè¯·æ±‚    â”‚  â”‚ æ•°æ®éªŒè¯    â”‚  â”‚ é”™è¯¯å¤„ç†    â”‚         â”‚
â”‚  â”‚ å°è£…        â”‚  â”‚ å’Œè¿‡æ»¤      â”‚  â”‚ å’Œé‡è¯•      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åç«¯æœåŠ¡å™¨ (Node.js)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ è·¯ç”±å¤„ç†    â”‚  â”‚ ä¸šåŠ¡é€»è¾‘    â”‚  â”‚ æ•°æ®è®¿é—®    â”‚         â”‚
â”‚  â”‚ å’Œä¸­é—´ä»¶    â”‚  â”‚ å’ŒéªŒè¯      â”‚  â”‚ å±‚(DAO)     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MySQLæ•°æ®åº“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ç”¨æˆ·è¡¨      â”‚  â”‚ åŠ¨ç‰©è¡¨      â”‚  â”‚ å•†å“è¡¨      â”‚         â”‚
â”‚  â”‚ æèµ è¡¨      â”‚  â”‚ è¯„è®ºè¡¨      â”‚  â”‚ è®¢å•è¡¨      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: ç¯å¢ƒå‡†å¤‡

#### 1.1 å®‰è£…Node.js
```bash
# ä¸‹è½½å¹¶å®‰è£…Node.js 16.0+
# https://nodejs.org/

# éªŒè¯å®‰è£…
node --version
npm --version
```

#### 1.2 å®‰è£…MySQL
```bash
# Windows: ä¸‹è½½MySQL Installer
# https://dev.mysql.com/downloads/installer/

# macOS: ä½¿ç”¨Homebrew
brew install mysql

# Ubuntu/Debian
sudo apt-get install mysql-server

# å¯åŠ¨MySQLæœåŠ¡
sudo systemctl start mysql
```

#### 1.3 å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·
- ä¸‹è½½åœ°å€: https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
- ç‰ˆæœ¬è¦æ±‚: 1.06.0+

### æ­¥éª¤2: æ•°æ®åº“åˆå§‹åŒ–

#### 2.1 åˆ›å»ºæ•°æ®åº“
```bash
# ç™»å½•MySQL
mysql -u root -p

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
source database/init.sql;

# æ‰§è¡Œç¤ºä¾‹æ•°æ®è„šæœ¬
source database/sample_data.sql;
```

#### 2.2 éªŒè¯æ•°æ®åº“
```bash
# æ£€æŸ¥è¡¨ç»“æ„
mysql -u root -p -e "USE campus_animal_care; SHOW TABLES;"

# æ£€æŸ¥æ•°æ®
mysql -u root -p -e "USE campus_animal_care; SELECT COUNT(*) FROM users;"
```

### æ­¥éª¤3: åç«¯æœåŠ¡éƒ¨ç½²

#### 3.1 å®‰è£…ä¾èµ–
```bash
cd backend
npm install
```

#### 3.2 é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp config.example.env .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env
```

#### 3.3 å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

#### 3.4 éªŒè¯æœåŠ¡
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3000/health

# APIæµ‹è¯•
curl http://localhost:3000/api/animals
```

### æ­¥éª¤4: å°ç¨‹åºé…ç½®

#### 4.1 ä¿®æ”¹APIé…ç½®
```javascript
// config/api.js
module.exports = {
  baseURL: 'http://localhost:3000/api', // å¼€å‘ç¯å¢ƒ
  // baseURL: 'https://your-domain.com/api', // ç”Ÿäº§ç¯å¢ƒ
  useLocalData: false, // å¯ç”¨æ•°æ®åº“æ¨¡å¼
  // ... å…¶ä»–é…ç½®
};
```

#### 4.2 æµ‹è¯•æ•°æ®è¿æ¥
```javascript
// åœ¨ä»»æ„é¡µé¢æµ‹è¯•
const dataService = require('../../utils/dataService');

Page({
  async onLoad() {
    try {
      const animals = await dataService.getAnimals();
      console.log('åŠ¨ç‰©æ•°æ®:', animals);
    } catch (error) {
      console.error('æ•°æ®åŠ è½½å¤±è´¥:', error);
    }
  }
});
```

## ğŸ”§ è¯¦ç»†é…ç½®

### æ•°æ®åº“é…ç½®

#### è¿æ¥é…ç½®
```javascript
// backend/config/database.js
const dbConfig = {
  host: process.env.DB_HOST || 'localhost',
  port: process.env.DB_PORT || 3306,
  user: process.env.DB_USER || 'root',
  password: process.env.DB_PASSWORD || '',
  database: process.env.DB_NAME || 'campus_animal_care',
  charset: 'utf8mb4',
  timezone: '+08:00',
  connectionLimit: 10,
  acquireTimeout: 60000,
  timeout: 60000
};
```

#### ç¯å¢ƒå˜é‡
```bash
# .envæ–‡ä»¶
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=campus_animal_care
DB_CHARSET=utf8mb4

PORT=3000
NODE_ENV=development

JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES_IN=7d
```

### APIé…ç½®

#### åŸºç¡€é…ç½®
```javascript
// config/api.js
module.exports = {
  baseURL: 'http://localhost:3000/api',
  timeout: 30000,
  retryAttempts: 3,
  useLocalData: false,
  
  // å®‰å…¨é…ç½®
  request: {
    header: {
      'Content-Type': 'application/json'
    }
  },
  
  // ç¼“å­˜é…ç½®
  cache: {
    enabled: true,
    ttl: 300000, // 5åˆ†é’Ÿ
    maxSize: 100
  }
};
```

### å®‰å…¨é…ç½®

#### æ•°æ®éªŒè¯
```javascript
// utils/security.js
const validationRules = {
  nickname: {
    required: true,
    type: 'string',
    minLength: 1,
    maxLength: 100,
    checkSecurity: true
  },
  content: {
    required: true,
    type: 'string',
    minLength: 1,
    maxLength: 500,
    checkSecurity: true
  }
};
```

#### é”™è¯¯å¤„ç†
```javascript
// utils/errorHandler.js
ErrorHandler.handleAsyncError(
  async () => {
    return await apiService.getAnimals();
  },
  { operation: 'è·å–åŠ¨ç‰©åˆ—è¡¨' },
  { showError: true, retryCount: 3 }
);
```

## ğŸ“Š æ•°æ®è¿ç§»

### ä»æœ¬åœ°æ•°æ®è¿ç§»åˆ°æ•°æ®åº“

#### 1. æ•°æ®å¯¼å‡º
```javascript
// å¯¼å‡ºæœ¬åœ°æ•°æ®
const fs = require('fs');
const dataService = require('./utils/dataService');

async function exportData() {
  const animals = await dataService.getAnimals();
  const products = await dataService.getProducts();
  const notices = await dataService.getNotices();
  
  fs.writeFileSync('export/animals.json', JSON.stringify(animals, null, 2));
  fs.writeFileSync('export/products.json', JSON.stringify(products, null, 2));
  fs.writeFileSync('export/notices.json', JSON.stringify(notices, null, 2));
}
```

#### 2. æ•°æ®å¯¼å…¥
```sql
-- ä½¿ç”¨SQLè„šæœ¬å¯¼å…¥æ•°æ®
LOAD DATA INFILE 'export/animals.json' INTO TABLE animals;
LOAD DATA INFILE 'export/products.json' INTO TABLE products;
LOAD DATA INFILE 'export/notices.json' INTO TABLE notices;
```

### æ¸è¿›å¼è¿ç§»ç­–ç•¥

#### é˜¶æ®µ1: æ··åˆæ¨¡å¼
```javascript
// config/api.js
module.exports = {
  useLocalData: true, // ä»ä½¿ç”¨æœ¬åœ°æ•°æ®
  // é€æ­¥æµ‹è¯•APIæ¥å£
};
```

#### é˜¶æ®µ2: éƒ¨åˆ†API
```javascript
// utils/dataService.js
async getAnimals() {
  if (this.useApi) {
    // ä½¿ç”¨API
    return await apiService.getAnimals();
  }
  // å›é€€åˆ°æœ¬åœ°æ•°æ®
  return await this.getData('animals');
}
```

#### é˜¶æ®µ3: å®Œå…¨è¿ç§»
```javascript
// config/api.js
module.exports = {
  useLocalData: false, // å®Œå…¨ä½¿ç”¨æ•°æ®åº“
};
```

## ğŸ§ª æµ‹è¯•æŒ‡å—

### å•å…ƒæµ‹è¯•

#### åç«¯APIæµ‹è¯•
```bash
cd backend
npm test
```

#### æ•°æ®åº“æµ‹è¯•
```sql
-- æµ‹è¯•æ•°æ®å®Œæ•´æ€§
SELECT COUNT(*) FROM users;
SELECT COUNT(*) FROM animals;
SELECT COUNT(*) FROM products;

-- æµ‹è¯•å…³è”æŸ¥è¯¢
SELECT a.name, u.nickname 
FROM animals a 
JOIN users u ON a.created_by = u.id;
```

### é›†æˆæµ‹è¯•

#### APIæ¥å£æµ‹è¯•
```bash
# æµ‹è¯•ç”¨æˆ·ç™»å½•
curl -X POST http://localhost:3000/api/user/login \
  -H "Content-Type: application/json" \
  -d '{"openid":"test","nickname":"æµ‹è¯•ç”¨æˆ·"}'

# æµ‹è¯•è·å–åŠ¨ç‰©åˆ—è¡¨
curl http://localhost:3000/api/animals

# æµ‹è¯•åˆ›å»ºè¯„è®º
curl -X POST http://localhost:3000/api/comments/animal/1 \
  -H "Content-Type: application/json" \
  -d '{"user_id":1,"content":"æµ‹è¯•è¯„è®º"}'
```

#### å°ç¨‹åºæµ‹è¯•
```javascript
// åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æµ‹è¯•
Page({
  async testApi() {
    try {
      const dataService = require('../../utils/dataService');
      
      // æµ‹è¯•è·å–æ•°æ®
      const animals = await dataService.getAnimals();
      console.log('åŠ¨ç‰©æ•°æ®:', animals);
      
      // æµ‹è¯•åˆ›å»ºæ•°æ®
      const result = await dataService.createComment({
        animalId: 1,
        userId: 1,
        content: 'æµ‹è¯•è¯„è®º'
      });
      console.log('åˆ›å»ºç»“æœ:', result);
      
    } catch (error) {
      console.error('æµ‹è¯•å¤±è´¥:', error);
    }
  }
});
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
sudo systemctl status mysql

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3306

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
```

#### 2. APIè¯·æ±‚å¤±è´¥
```javascript
// æ£€æŸ¥ç½‘ç»œè¿æ¥
wx.request({
  url: 'http://localhost:3000/health',
  success: (res) => console.log('è¿æ¥æˆåŠŸ:', res),
  fail: (err) => console.error('è¿æ¥å¤±è´¥:', err)
});
```

#### 3. æ•°æ®éªŒè¯å¤±è´¥
```javascript
// æ£€æŸ¥æ•°æ®æ ¼å¼
const data = { nickname: 'æµ‹è¯•ç”¨æˆ·' };
const validation = SecurityUtils.validateData(data, {
  nickname: { required: true, type: 'string' }
});
console.log('éªŒè¯ç»“æœ:', validation);
```

### æ—¥å¿—åˆ†æ

#### åç«¯æ—¥å¿—
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f backend/logs/app.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f backend/logs/error.log
```

#### æ•°æ®åº“æ—¥å¿—
```sql
-- æŸ¥çœ‹æ…¢æŸ¥è¯¢
SHOW VARIABLES LIKE 'slow_query_log';
SHOW VARIABLES LIKE 'long_query_time';

-- æŸ¥çœ‹è¿æ¥æ•°
SHOW STATUS LIKE 'Threads_connected';
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–

#### ç´¢å¼•ä¼˜åŒ–
```sql
-- ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
CREATE INDEX idx_animals_species ON animals(species);
CREATE INDEX idx_animals_status ON animals(status);
CREATE INDEX idx_comments_animal_id ON comments(animal_id);
CREATE INDEX idx_donations_status ON donations(status);
```

#### æŸ¥è¯¢ä¼˜åŒ–
```sql
-- ä½¿ç”¨EXPLAINåˆ†ææŸ¥è¯¢
EXPLAIN SELECT * FROM animals WHERE species = 'cat' AND status = 1;

-- ä¼˜åŒ–JOINæŸ¥è¯¢
SELECT a.*, u.nickname 
FROM animals a 
LEFT JOIN users u ON a.created_by = u.id 
WHERE a.status = 1;
```

### ç¼“å­˜ä¼˜åŒ–

#### Redisç¼“å­˜
```javascript
// æ·»åŠ Redisç¼“å­˜
const redis = require('redis');
const client = redis.createClient();

async function getCachedData(key) {
  const cached = await client.get(key);
  return cached ? JSON.parse(cached) : null;
}

async function setCachedData(key, data, ttl = 300) {
  await client.setex(key, ttl, JSON.stringify(data));
}
```

### å‰ç«¯ä¼˜åŒ–

#### æ•°æ®ç¼“å­˜
```javascript
// å®ç°æ•°æ®ç¼“å­˜
class DataCache {
  constructor(ttl = 300000) {
    this.cache = new Map();
    this.ttl = ttl;
  }
  
  get(key) {
    const item = this.cache.get(key);
    if (item && Date.now() - item.timestamp < this.ttl) {
      return item.data;
    }
    return null;
  }
  
  set(key, data) {
    this.cache.set(key, {
      data,
      timestamp: Date.now()
    });
  }
}
```

## ğŸ”’ å®‰å…¨å»ºè®®

### æ•°æ®å®‰å…¨

#### è¾“å…¥éªŒè¯
```javascript
// ä¸¥æ ¼éªŒè¯ç”¨æˆ·è¾“å…¥
const rules = {
  nickname: {
    required: true,
    type: 'string',
    minLength: 1,
    maxLength: 100,
    checkSecurity: true
  }
};
```

#### SQLæ³¨å…¥é˜²æŠ¤
```javascript
// ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
const sql = 'SELECT * FROM users WHERE id = ?';
const result = await query(sql, [userId]);
```

### ç½‘ç»œå®‰å…¨

#### HTTPSé…ç½®
```javascript
// ç”Ÿäº§ç¯å¢ƒä½¿ç”¨HTTPS
const https = require('https');
const fs = require('fs');

const options = {
  key: fs.readFileSync('private-key.pem'),
  cert: fs.readFileSync('certificate.pem')
};

https.createServer(options, app).listen(443);
```

#### è¯·æ±‚é™æµ
```javascript
// å®ç°è¯·æ±‚é™æµ
const rateLimit = require('express-rate-limit');

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
  max: 100 // é™åˆ¶æ¯ä¸ªIP 100æ¬¡è¯·æ±‚
});

app.use('/api', limiter);
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [APIæ¥å£æ–‡æ¡£](./API_æ¥å£æ–‡æ¡£.md)
- [æ•°æ®åº“è®¾è®¡æ–‡æ¡£](./æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md)
- [éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md)
- [å®‰å…¨æŒ‡å—](./å®‰å…¨æŒ‡å—.md)

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨é›†æˆè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯æ—¥å¿—
3. å‚è€ƒç›¸å…³æ–‡æ¡£
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

**æ³¨æ„**: æœ¬æŒ‡å—åŸºäºå½“å‰ç‰ˆæœ¬çš„å°ç¨‹åºæ¶æ„ç¼–å†™ï¼Œå¦‚æœ‰æ›´æ–°è¯·åŠæ—¶åŒæ­¥æ–‡æ¡£ã€‚

